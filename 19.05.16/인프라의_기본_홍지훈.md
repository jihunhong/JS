# 📖 인프라의 기본 DAY-1


<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->
<!-- code_chunk_output -->

* [📖 인프라의 기본 DAY-1](#인프라의-기본-day-1)
* [🏭 웹서비스에서 인프라의 역할](#웹서비스에서-인프라의-역할)
	* [🏟️인프라 기술의 계층구조](#️인프라-기술의-계층구조)
		* [☁️ 클라우드 서비스 (IaaS/Paas)](#️-클라우드-서비스-iaaspaas)
	* [📝 인프라 설계시 고려 요건](#인프라-설계시-고려-요건)
		* [기능적 요건](#기능적-요건)
		* [비기능적 요건](#비기능적-요건)
		* [인프라의 신뢰성 확보 : RAS / RASIS](#인프라의-신뢰성-확보-ras-rasis)
	* [📈 RAS의 인프라 신뢰성 확인 지표](#ras의-인프라-신뢰성-확인-지표)
		* [가동률](#가동률)
		* [장애 발생 간격 MTBF  (Mean Time Between Failures)](#장애-발생-간격-mtbf-mean-time-between-failures)
		* [평균 복구 시간 MTTR (Mean Time To Repair)](#평균-복구-시간-mttr-mean-time-to-repair)
			* [요소 각각의 가동률을 높이기](#요소-각각의-가동률을-높이기)
			* [요소를 조합해 서비스의 가동률 높이기](#요소를-조합해-서비스의-가동률-높이기)
				* [Active-Standby](#active-standby)

<!-- /code_chunk_output -->


#🏭 웹서비스에서 인프라의 역할

- 코로케이션 : 직접 서버를 관리를 하지 않고 인터넷 서비스를 제공하는 IDC 업체가 보유한 네트워크 망으로 서버를 연결하여 관리하는 서비스.

## 🏟️인프라 기술의 계층구조
|layer   | OSI  | example   |
|---|---|---|
|7   | 애플리케이션 계층  |HTTP, SMTP, SSH, FTP |
|4   | 전송 계층  |TCP,UDP |
|3   | 네트워크 계층  |IP,ICMP |
|2   | 데이터링크 계층  |Ethernet |
|1   | 물리 게층  |RJ-45 |
>인프라라고 하는것은 처리단계가 아니라 **계층에 관하여 다루는 것이다.**

### ☁️ 클라우드 서비스 (IaaS/Paas)
> 클라우드 서비스는 이러한 계층 구조를 이용해 특정 계층까지의 패키징을 제공하는것이다.
**IaaS (Infrastructure as a Service)** : 서버나 네트워크 인프라부분을 인터넷을 통해 이용하는 것
**PaaS (Platform as a Service)** : 인프라 부분을 신경쓰지 않고 준비된 개발환경을 인터넷 경유로 이용하는것

- IaaS : `AWS` `GCP` `Sofylayer`
- PaaS : `Heroku` `Google App Engine` `Engine Yard`

**✔️ EC2와 RDS는 각각 IaaS와 PaaS에 속한다**


## 📝 인프라 설계시 고려 요건

### 기능적 요건
> 동시 접속 수와 관련된 세션수, 로드 밸런싱과 관련된 서버의 대수등의 인프라의 기능적인 요소들

### 비기능적 요건
- 가용성 : 가동률, 목표 복구시간, 재해 대책
- 성능/확장성 : 성능 목표, 확장성
- 운용/유지보수성 : 운용시간, 백업, 운용 감시, 정기 보수
- 이행성 : 이행 방식의 규정, 이행 스케줄, 설비/데이터
- 보안 : 가이드라인과 네트워크 레벨 제어, DoS 공격 대책, 정보 유출 대책, 사고 발생시의 대응
- 시스템 환경 / 생태 환경 : 적합 규격, 기기 설치 규격, 환경 관리

### 인프라의 신뢰성 확보 : RAS / RASIS
- Reliability : 신뢰성
- Availability : 가용성
- Serviceability : 유지 보수성
- Integretiy : 무결성
- Security : 안전성

## 📈 RAS의 인프라 신뢰성 확인 지표

### 가동률
> 가동률은 보통 MTBF/(MTBF+MTTR)로 계산한다.

```
가동률은 실제 비 엔지니어가 상상 할 수 있는 지표로써 작용하기에 가동률을 중심으로 각종 요소를 결정한다.

가동률을 높이기 위한 방법으로는 '다중화'를 사용하는데
장애가 발생한 경우 해당 요소외에 다른 구성 요소들이 처리를 넘겨받아 시스템 전체의 가용성을 높이는것을 말한다.

이렇게 함으로써 SPOF (Single Point Of Failures) 단일 장애 포인트를 줄이는 방향으로의 조정을 행하는것이다.
```

### 장애 발생 간격 MTBF  (Mean Time Between Failures)
> 누적 사용 시간 / 고장 횟수

### 평균 복구 시간 MTTR (Mean Time To Repair)
> 누적 수리 시간 / 고장 횟수

✔️ 대게 서비스 제공을 위해 필요한 장비의 최소대수를 N으로 하면 평상시의 최소대수는  N+1의 구성을 취한다.
✔️ MTTR아 분명할 것으로 예상된다면 N+2
✔️ N+1이 N이 된후 다시 N+1이 될 때 까지가 **장애 대응** 이라 말한다.


#### 요소 각각의 가동률을 높이기
- 서버용 부품의 사용 : MTBF를 길게 할 수 있는 기대효과
- 부품을 이중화하기 : 서비스 중지 방지
- 요소의 가동률 확인 : 가동률을 유지할 수 있는 기대효과

#### 요소를 조합해 서비스의 가동률 높이기
> 다중화의 구성을 조정해 가동률을 높이는 것을 말한다.
다중화된 요소를 모두 이용할 수 있는 'Active-Active'와 'Active-Standby'가 있다.

##### Active-Standby
|   |   |
|---|---|
|Hot Standby   |   |
|Warm Standby   |   |
|Cold Standby   |   |
